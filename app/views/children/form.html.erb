

<div class="wrapper wrapper-content animated fadeInRight">
  <div class="row">
    <div class="col-lg-12">
      <div class="ibox float-e-margins">

        <div class="ibox-title">
          <h2><%= @heading %></h2>
        </div>

        <div class="ibox-content">
          <div class="row">
            <div class="col-sm-4">

              <% if @child.errors.any? %>
                <div id="error_expl" class="panel panel-danger">
                  <div class="panel-heading">
                    <h3 class="panel-title"><%= pluralize(@child.errors.count, "error") %> prevented this child from being saved:</h3>
                  </div>
                  <div class="panel-body">
                    <ul>
                    <% @child.errors.full_messages.each do |msg| %>
                      <li><%= msg %></li>
                    <% end %>
                    </ul>
                  </div>
                </div>
              <% end %>

              <%= form_for @child, :html => { :class => "child" } do |f| %>

                <div class="form-group <%= "has-error" if @child.errors[:first_name].present? %>">
                  <%= f.label :first_name, 'First name', :class => 'control-label' %>
                  <%= f.text_field :first_name, :class => 'form-control' %>
                </div>

                <div class="form-group <%= "has-error" if @child.errors[:last_name].present? %>">
                  <%= f.label :last_name, 'Last name', :class => 'control-label' %>
                  <%= f.text_field :last_name, :class => 'form-control' %>
                </div>

                <div class="form-group date decade">
                  <%= f.label :date_of_birth, 'Date of birth', :class => 'control-label' %>
                  <div class="input-group date">
                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                    <%= f.text_field :date_of_birth, 
                                     :placeholder => 'dd/mm/yyyy', 
                                     :value => (l(@child.date_of_birth, :format => :short) if @child.date_of_birth?), 
                                     :class => 'form-control date' %>
                  </div>
                </div>

                <div class="form-group <%= "has-error" if @child.errors[:ministry_tracker_id].present? %>">
                  <%= f.label :ministry_tracker_id, 'Ministry tracker ID', :class => 'control-label' %>
                  <%= f.text_field :ministry_tracker_id, :class => 'form-control' %>
                </div>

                <div class="form-group <%= "has-error" if @child.errors[:medical_information].present? %>">
                  <%= f.label :medical_information, 'Medical information', :class => 'control-label' %>
                  <%= f.text_area :medical_information, :rows => 3, :class => 'form-control' %>
                </div>

                <div class="form-group">
                  <%= f.label :update_required, 'Update required?', :class => 'control-label' %>
                  <div class="checkbox checkbox-warning">
                    <%= f.check_box :update_required %> 
                    <%= f.label :update_required, 'Yes' %>
                  </div>
                </div>           

                <div class="form-group" style="margin-top: 20px;">
                  <%= f.submit 'Save', :class => 'btn btn-primary' %>
                  <%= link_to 'Cancel', children_path, :class => 'btn btn-default' unless @child.id? %>
                  <%= link_to 'Cancel', child_path, :id => @child.id, :class => 'btn btn-default' if @child.id? %>
                </div>

              <% end %>

            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</div>
